{"version":3,"sources":["../../../src/js/components/chat-box/chat-box.jsx"],"names":["commonFuncs","ChatBox","props","state","message","toggleCollapse","bind","removeBox","toggleChat","onSendMessage","isContacts","e","box","ReactDOM","findDOMNode","children","boxBody","icon","currentTarget","toggleBoxCollapse","classy","className","indexOf","replace","hasContactChild","React","Children","forEach","child","type","includes","preventDefault","stopPropagation","onSubmit","borderClass","border","width","headerTheme","chatTheme","title","notifications","notificationTheme","setState","value","buttonTheme","Component","propTypes","PropTypes","number","bool","string","oneOfType","func","defaultProps"],"mappings":"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","file":"chat-box.js","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport * as commonFuncs from '../../services/common-functions';\nimport PropTypes from 'prop-types';\n\nclass ChatBox extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { message: '' };\n    this.toggleCollapse = this.toggleCollapse.bind(this);\n    this.removeBox = this.removeBox.bind(this);\n    this.toggleChat = this.toggleChat.bind(this);\n    this.onSendMessage = this.onSendMessage.bind(this);\n    this.isContacts = this.isContacts.bind(this);\n  }\n\n  toggleCollapse(e) {\n    const box = ReactDOM.findDOMNode(this).children[0];\n    const boxBody = ReactDOM.findDOMNode(this).children[0].children[1];\n    const icon = e.currentTarget.children[0];\n    commonFuncs.toggleBoxCollapse(box, boxBody, icon);\n  }\n\n  removeBox() {\n    const box = ReactDOM.findDOMNode(this).children[0];\n    commonFuncs.removeBox(box);\n  }\n\n  toggleChat() {\n    const box = ReactDOM.findDOMNode(this).children[0];\n    const classy = ' direct-chat-contacts-open';\n    if (box.className.indexOf(classy) >= 0) {\n      box.className = box.className.replace(classy, '');\n    } else {\n      box.className = `${box.className}${classy}`;\n    }\n  }\n\n  isContacts() {\n    let hasContactChild = false;\n    React.Children.forEach(this.props.children, child => {\n      if (`${child.type}`.includes('Contacts')) { hasContactChild = true; }\n    });\n    return this.props.children && hasContactChild;\n  }\n\n  onSendMessage(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    this.props.onSubmit(this.state.message);\n  }\n\n  render() {\n    const borderClass = this.props.border === true ? 'box-solid' : '';\n    return (\n      <div className={`col-md-${this.props.width}`}>\n        <div className={`box direct-chat ${this.props.headerTheme} ${this.props.chatTheme} ${borderClass}`}>\n          <div className=\"box-header with-border\">\n            <h3 className=\"box-title\">{this.props.title}</h3>\n            <div className=\"box-tools pull-right\">\n              {this.props.notifications > 0 ? (\n                <span data-toggle=\"tooltip\" title=\"\" className={`badge ${this.props.notificationTheme}`} data-original-title={`${this.props.notifications} New Messages`}>\n                  {this.props.notifications}\n                </span>\n              ) : ''}\n              {this.isContacts() ? (\n                <button className=\"btn btn-box-tool\" data-toggle=\"tooltip\" title=\"\" data-widget=\"chat-pane-toggle\" data-original-title=\"Contacts\" onClick={this.toggleChat}>\n                  <i className=\"fa fa-comments\" />\n                </button>\n              ) : ''}\n              <button className=\"btn btn-box-tool\" data-toggle=\"collapse\" onClick={this.toggleCollapse}>\n                <i className=\"fa fa-minus\" />\n              </button>\n              <button className=\"btn btn-box-tool\" data-toggle=\"remove\" onClick={this.removeBox}>\n                <i className=\"fa fa-times\" />\n              </button>\n            </div>\n          </div>\n          <div className=\"box-body\">\n            {this.props.children}\n          </div>\n          <div className=\"box-footer\">\n            <form noValidate onSubmit={this.onSendMessage}>\n              <input\n                type=\"text\"\n                name=\"message\"\n                placeholder=\"Type message...\"\n                className=\"form-control\"\n                value={this.state.message}\n                onChange={(e) => {\n                  this.setState({ message: e.currentTarget.value });\n                }}\n              />\n              <span className=\"input-group-btn\">\n                <button\n                  type=\"button\"\n                  className={`btn btn-flat ${this.props.buttonTheme}`}\n                  onClick={this.onSendMessage}\n                >\n                  Send\n                </button>\n              </span>\n            </form>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nChatBox.propTypes = {\n  width: PropTypes.number,\n  border: PropTypes.bool,\n  headerTheme: PropTypes.string,\n  notificationTheme: PropTypes.string,\n  chatTheme: PropTypes.string,\n  buttonTheme: PropTypes.string,\n  title: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.number\n  ]),\n  notifications: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.number\n  ]),\n  onSubmit: PropTypes.func\n};\nChatBox.defaultProps = {\n  width: 3,\n  border: false,\n  headerTheme: 'box-primary',\n  notificationTheme: 'bg-light-blue',\n  chatTheme: 'direct-chat-primary',\n  buttonTheme: 'btn-primary',\n  title: 'Chat Box',\n  notifications: 0,\n  onSubmit: () => {}\n};\n\nexport default ChatBox;\n"]}